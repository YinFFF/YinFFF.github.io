---
layout: post
title: 浮点数存储方式 
date: 2017-06-15
categories: C/C++
tags: 计算机组成原理 
---

* content
{:toc}

## Float在计算机中存储的方式

1. float占4个字节，分别是1位的符号位、8位的指数为、24位的尾数位（23+1），如下：

   <img src="/images/c-float-1.png" width="60%">

2. 当程序向float变量赋值时：

   ```c
   float a = 2.2;
   ```
   需要将2.2的转化为二进制存储到变量`a`的4个字节存储空间中，此时会发生十进制小数2.2无法用二进制方式准确表示的问题。

3. 当程序将float变量打印出来时：

   ```c
   cout << a;
   ```
   显示结果为`2.2`，但当精确到第8位时出现`2.20000005`，原因在于：

   - cout 打印时默认打印到小数点后6至7位，原因在于float尾数为24位，一般来说默认认为十进制中1位小数需要使用二进制中4位小数来表示才可以让十进制的表示不会出现误差。（0.1到0.9有9个数，3位二进制一定无法区分9个数）
   - 虽然打印时默认显示十进制小数后6至7位，但其实在24位二进制转换为十进制时真实数值为`2.20000000476837158`，也就是说存储的二进制值只要能保证转换后的十进制在6至7位上是准确的就行了。